# settings.cfg
# Configurazione generale del robot RoboCup Jr Rescue Line
# I parametri motori sono in motors.cfg

# ─── CAMERA ───────────────────────────────────────────────────────────────────
[camera]
width    = 160
height   = 120
fps      = 60
# Rotazione del sensore fisico (la camera è montata capovolta)
rotation = 180
# Angolo del servo che inclina la camera (0-180, centro=90)
servo_camera_angle = 90

# ─── VISION ───────────────────────────────────────────────────────────────────
[vision]
# Soglia binarizzazione (0-255): sotto = nero (linea), sopra = bianco
threshold_value    = 80
# Kernel del blur gaussiano (dispari: 3, 5, 7...)
blur_kernel        = 3
# ROI verticale: percentuale del frame da usare (0.0 = top, 1.0 = bottom)
roi_top_ratio      = 0.55
roi_bottom_ratio   = 1.0
# Margini laterali da ignorare (percentuale larghezza)
side_margin_ratio  = 0.10
# Luminosità minima per considerare il pixel parte del tracciato
track_min_brightness = 40

# ─── PID ──────────────────────────────────────────────────────────────────────
[pid]
kp            = 0.7
ki            = 0.005
kd            = 0.2
# Zona morta: errori sotto questa soglia vengono ignorati (px)
dead_zone     = 20
# Limite anti-windup sull'integrale
max_integral  = 100

# ─── LINE DETECTION ───────────────────────────────────────────────────────────
[line]
# Soglia errore per considerare un angolo retto (px dal centro)
right_angle_error_threshold = 75
# Abilita il rilevamento angolo retto
right_angle_enabled         = true
# Peso continuità per preferire la linea più vicina al centro precedente
continuity_weight_power     = 3.0
# Numero massimo di frame in memoria per la continuità
max_frames_memory           = 8

# ─── WEB SERVER ───────────────────────────────────────────────────────────────
[web]
host      = 0.0.0.0
port      = 5000
debug     = false
# FPS massimi dello stream MJPEG (ridurre se la rete è lenta)
stream_fps = 15
